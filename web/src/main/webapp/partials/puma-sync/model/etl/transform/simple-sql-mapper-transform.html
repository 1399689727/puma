<!-- model.node -->

<div>
    <ul class="nav nav-tabs">
        <li role="presentation" ng-class="{'active':map.active}" ng-repeat="map in node.nodeConfigJson.maps"><a
                href ng-click="changeCurrentMapping(node.nodeConfigJson,$index)">{{map.sourceTable}}</a>
        </li>
        <li role="presentation">
            <a href ng-click="addMapping(node.nodeConfigJson)">
                <span title="Add Mapping" class="glyphicon glyphicon-plus" aria-hidden="true"></span>
            </a>
        </li>
    </ul>
    <div class="nav-tabs-content" ng-show="currentMapping">
        <br/>
        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right"> Source Table </label>
            <div class="col-sm-6">
                <input ng-model="currentMapping.sourceTable" type="text"
                       value={{currentMapping.sourceTable}} class="form-control"/>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right"> Target Table </label>
            <div class="col-sm-6">
                <input ng-model="currentMapping.targetTable" type="text"
                       placeholder="留空代表不变更表名"
                       value={{currentMapping.targetTable}} class="form-control"/>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right"></label>
            <div class="col-sm-6">
                <button class="btn btn-danger" ng-click="removeMapping(node.nodeConfigJson)">Remove Table Mapping
                </button>
                <button class="btn btn-success" ng-click="addColumnMapping(currentMapping)">Add Column Mapping</button>
            </div>
        </div>
        <div class="form-group" ng-repeat="columnMap in currentMapping.maps">
            <label class="col-sm-3 control-label no-padding-right"></label>
            <div class="col-sm-3">
                <input ng-model="columnMap.sourceColumn" placeholder="来源字段" type="text" class="form-control col-sm-2"/>
            </div>
            <div class="col-sm-3">
                <input ng-model="columnMap.targetColumn" placeholder="目标(留空代表移除)" type="text"
                       class="form-control col-sm-2"/>
            </div>
            <div class="col-sm-1">
                <button class="btn btn-danger" ng-click="removeColumnMapping(currentMapping,$index)"><span
                        class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
            </div>
        </div>
    </div>
</div>