<div class="container-fluid">

    <div class="panel panel-primary">
        <div class="panel-heading">
            <a class="glyphicon glyphicon-plus"
               style="float:right; color:white"
               href="${rc.contextPath}/replicationTask/create"></a>
            主从复制任务
        </div>
        <table id="replicationTaskTable" class="table table-hover">
            <thead>
            <tr>
                <th class="col-md-2">数据库</th>
                <th class="col-md-2">服务器</th>
                <th class="col-md-2">状态</th>
                <th class="col-md-4">日志进度</th>
                <th class="col-md-2">操作</th>
            </tr>
            </thead>

            <tbody>
            #foreach($replicationTask in ${replicationTasks})
            <tr id="tr-$replicationTask.taskId">
                <td>${replicationTask.dbInstanceName}</td>
                <td>${replicationTask.replicationServerName}</td>
                <td id="status-$replicationTask.taskId"></td>
                <td id="binlogInfo-$replicationTask.taskId"></td>
                <td>
                    <a id="refresh-$replicationTask.taskId"
                       class="glyphicon glyphicon-repeat"
                       href="javascript:updateReplicationTask(${replicationTask.taskId});"></a>
                    <a id="delete-$replicationTask.taskId"
                       class="glyphicon glyphicon-remove"
                       href="javascript:removeReplicationTaskModal(${replicationTask.taskId})"></a>
                </td>
            </tr>
            #end
            </tbody>
        </table>
    </div>
</div>

<div class="modal fade"
     id="removeReplicationTaskModal"
     tabindex="-1"
     role="dialog"
     aria-hidden="true">

    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title">删除任务</h3>
            </div>

            <form action="${rc.contextPath}/replicationTask/delete"
                  method="post" onsubmit="pumadmin.submit(this);return false;"
                  onSuccess="deleteReplicationTaskDone">
                <div class="modal-body">
                    <p style="text-align: center;">
                        <i class="icon-warning-sign"></i> 您是否确定要删除该配置 ？
                    </p>
                    <input id="delId" name="id" type="hidden" value="">
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">确定</button>
                    <button data-dismiss="modal" class="btn">取消</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script type="text/javascript" src="js/replication-task/main.js"></script>
